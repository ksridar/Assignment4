{"ast":null,"code":"import { createStore, applyMiddleware, combineReducers } from 'redux';\nimport thunk from 'redux-thunk';\nconst ADD_ITEM = 'ADD_ITEM';\nconst DELETE_ALL = 'DELETE_ALL';\nconst SET_ITEMS = 'SET_ITEMS';\nconst EDIT_ITEM = 'EDIT_ITEM';\nconst DELETE_ITEM = 'DELETE_ITEM';\nexport const addItem = item => ({\n  type: ADD_ITEM,\n  payload: item\n});\nexport const deleteAll = () => ({\n  type: DELETE_ALL\n});\nexport const setItems = items => ({\n  type: SET_ITEMS,\n  payload: items\n});\nexport const editItem = item => ({\n  type: EDIT_ITEM,\n  payload: item\n});\nexport const deleteItem = itemId => ({\n  type: DELETE_ITEM,\n  payload: itemId\n});\nexport const fetchItems = () => {\n  console.log(\"called fetch\");\n  return dispatch => {\n    return fetch('http://localhost:3001/items').then(response => response.json()).then(data => {\n      dispatch(setItems(data));\n      console.log(data);\n    }).catch(error => console.log(error));\n  };\n};\nexport const addItemAsync = item => {\n  return dispatch => {\n    return fetch('http://localhost:3001/items', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }).then(response => response.json()).then(data => {\n      dispatch(addItem(data));\n    }).catch(error => console.log(error));\n  };\n};\nexport const editItemAsync = item => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/items/${item._id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }).then(response => {\n      if (response.ok) {\n        dispatch(editItem(item));\n      } else {\n        throw new Error('Failed to update item');\n      }\n    }).catch(error => console.log(error));\n  };\n};\nexport const deleteAllAsync = () => {\n  return dispatch => {\n    return fetch('http://localhost:3001/items', {\n      method: 'DELETE'\n    }).then(response => {\n      if (response.ok) {\n        dispatch(deleteAll());\n      }\n    }).catch(error => console.log(error));\n  };\n};\nexport const deleteItemAsync = itemId => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/items/${itemId}`, {\n      method: 'DELETE'\n    }).then(() => dispatch(deleteItem(itemId))).catch(error => console.log(error));\n  };\n};\nexport const setItemsAsync = () => {\n  return dispatch => {\n    return fetch('http://localhost:3001/items').then(response => response.json()).then(data => dispatch(setItems(data))).catch(error => console.log(error));\n  };\n};\nconst initialState = {\n  items: []\n};\nconst itemsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.items;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_ITEM:\n      return [...state, action.payload];\n    case DELETE_ALL:\n      return [];\n    case SET_ITEMS:\n      return action.payload;\n    case EDIT_ITEM:\n      return state.map(item => item._id === action.payload._id ? action.payload : item);\n    case DELETE_ITEM:\n      return state.filter(item => item._id !== action.payload);\n    default:\n      return state;\n  }\n};\nconst rootReducer = combineReducers({\n  items: itemsReducer\n});\nconst store = createStore(rootReducer, applyMiddleware(thunk));\nstore.dispatch(fetchItems());\nstore.subscribe(() => {\n  if (store.getState().items.length === 0) {\n    store.dispatch(fetchItems());\n  }\n});\nexport default store;","map":{"version":3,"names":["createStore","applyMiddleware","combineReducers","thunk","ADD_ITEM","DELETE_ALL","SET_ITEMS","EDIT_ITEM","DELETE_ITEM","addItem","item","type","payload","deleteAll","setItems","items","editItem","deleteItem","itemId","fetchItems","console","log","dispatch","fetch","then","response","json","data","catch","error","addItemAsync","method","headers","body","JSON","stringify","editItemAsync","_id","ok","Error","deleteAllAsync","deleteItemAsync","setItemsAsync","initialState","itemsReducer","state","arguments","length","undefined","action","map","filter","rootReducer","store","subscribe","getState"],"sources":["/Users/krishsridar/assignment2/client/src/redux/store.js"],"sourcesContent":["import { createStore, applyMiddleware, combineReducers } from 'redux';\nimport thunk from 'redux-thunk';\n\nconst ADD_ITEM = 'ADD_ITEM';\nconst DELETE_ALL = 'DELETE_ALL';\nconst SET_ITEMS = 'SET_ITEMS';\nconst EDIT_ITEM = 'EDIT_ITEM';\nconst DELETE_ITEM = 'DELETE_ITEM';\n\nexport const addItem = (item) => ({\n  type: ADD_ITEM,\n  payload: item,\n});\n\nexport const deleteAll = () => ({\n  type: DELETE_ALL,\n});\n\nexport const setItems = (items) => ({\n  type: SET_ITEMS,\n  payload: items,\n});\n\nexport const editItem = (item) => ({\n  type: EDIT_ITEM,\n  payload: item,\n});\n\nexport const deleteItem = (itemId) => ({\n  type: DELETE_ITEM,\n  payload: itemId,\n});\n\nexport const fetchItems = () => {\n  console.log(\"called fetch\")\n  return (dispatch) => {\n    return fetch('http://localhost:3001/items')\n      .then((response) => response.json())\n      .then((data) => {\n        dispatch(setItems(data));\n        console.log(data);\n      })\n      .catch((error) => console.log(error));\n  };\n};\n\nexport const addItemAsync = (item) => {\n  return (dispatch) => {\n    return fetch('http://localhost:3001/items', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(item),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        dispatch(addItem(data));\n      })\n      .catch((error) => console.log(error));\n  };\n};\n\nexport const editItemAsync = (item) => {\n  return (dispatch) => {\n    return fetch(`http://localhost:3001/items/${item._id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(item),\n    })\n      .then((response) => {\n        if (response.ok) {\n          dispatch(editItem(item));\n        } else {\n          throw new Error('Failed to update item');\n        }\n      })\n      .catch((error) => console.log(error));\n  };\n};\n\n\nexport const deleteAllAsync = () => {\n  return (dispatch) => {\n    return fetch('http://localhost:3001/items', {\n      method: 'DELETE',\n    })\n      .then((response) => {\n        if (response.ok) {\n          dispatch(deleteAll());\n        }\n      })\n      .catch((error) => console.log(error));\n  };\n};\n\nexport const deleteItemAsync = (itemId) => {\n  return (dispatch) => {\n    return fetch(`http://localhost:3001/items/${itemId}`, {\n      method: 'DELETE',\n    })\n      .then(() => dispatch(deleteItem(itemId)))\n      .catch((error) => console.log(error));\n  };\n};\n\nexport const setItemsAsync = () => {\n  return (dispatch) => {\n    return fetch('http://localhost:3001/items')\n      .then((response) => response.json())\n      .then((data) => dispatch(setItems(data)))\n      .catch((error) => console.log(error));\n  };\n};\n\nconst initialState = {\n  items: [],\n};\n\nconst itemsReducer = (state = initialState.items, action) => {\n  switch (action.type) {\n    case ADD_ITEM:\n      return [...state, action.payload];\n    case DELETE_ALL:\n      return [];\n    case SET_ITEMS:\n      return action.payload;\n    case EDIT_ITEM:\n      return state.map((item) =>\n        item._id === action.payload._id ? action.payload : item\n      );\n    case DELETE_ITEM:\n      return state.filter((item) => item._id !== action.payload);\n    default:\n      return state;\n  }\n};\n\nconst rootReducer = combineReducers({\n  items: itemsReducer,\n});\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\nstore.dispatch(fetchItems());\n\nstore.subscribe(() => {\n  if (store.getState().items.length === 0) {\n    store.dispatch(fetchItems());\n  }\n});\n\n\nexport default store;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}